# LLM-Based Integration Testing Configuration
# Copy this file to .env.test and fill in the actual values

# ============================================
# Mini App Configuration
# ============================================

# Deployed Mini App URL (must be HTTPS)
# Example: https://your-app.railway.app or https://your-app.onrender.com
MINIAPP_URL=https://your-miniapp-url.example.com

# ============================================
# Test Assets
# ============================================

# Path to test food image (relative to repo root)
# This image is used for calorie estimation scenarios (S2, S3, S4)
TEST_FOOD_IMAGE_PATH=tests/fixtures/food.jpg

# ============================================
# LLM Judge Configuration
# ============================================

# Gemini API key for LLM judge
# Get your API key from https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key

# ============================================
# Optional Configuration
# ============================================

# Overall test timeout in seconds (default: 120)
TEST_TIMEOUT_SECONDS=120

# ============================================
# Notes
# ============================================

# 1. Integration Testing Approach:
#    - Tests run LOCALLY without calling real Telegram APIs
#    - Bot handlers are invoked directly with mock Context objects
#    - No manual user interaction required (fully automated)
#    - Message preservation tested via mock deletion tracking
#
# 2. Mini App URL:
#    - Must be HTTPS (http:// will not work)
#    - Local development: Use ngrok or cloudflare tunnel
#      Example: ngrok http 5173 → https://abc123.ngrok.io
#      Example: cloudflared tunnel --url http://localhost:5173 → https://xxx.trycloudflare.com
#    - Cloud deployment: https://your-app.railway.app
#
# 3. Test Image:
#    - Any food photo works (judge validates structure, not accuracy)
#    - Recommended: simple meal with 2-3 recognizable items
#    - Place in tests/fixtures/ (food.jpg, food0.jpg, or food1.jpg)
#    - See tests/fixtures/README.md for details
#
# 4. Test Scope:
#    - S1-S4: Bot handler integration tests (no real Telegram API calls)
#    - S5: Mini App HTTP handler tests (using httptest.NewServer)
#    - LLM judge evaluates captured evidence for correctness
